<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DePaul BlueVox â€” Sign In</title>
    <link rel="icon" type="image/png" href="/static/assets/depaul-shield.png">
    
    <!-- UI font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Marck+Script&display=swap"
      rel="stylesheet"
    />
    
    
    <link rel="stylesheet" href="/static/styles.css">
    <style>
      :root {
        /* page */
        --page-text: rgba(255, 255, 255, 0.9);
        --muted: rgba(255, 255, 255, 0.7);

        /* lines + glow */
        --line: rgba(255, 255, 255, 0.35);
        --accent: rgba(120, 190, 255, 0.75);
        --accent-soft: rgba(90, 160, 255, 0.22);

        /* fields */
        --field-bg: rgba(2, 10, 28, 0.38);
        --field-border: rgba(120, 175, 255, 0.55);
        --field-border-focus: rgba(150, 210, 255, 0.85);

        /* button */
        --btn-top: rgba(70, 150, 255, 0.92);
        --btn-bot: rgba(35, 105, 245, 0.88);
        --btn-border: rgba(170, 220, 255, 0.5);
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body.bluevox-login {
        margin: 0;
        padding: 0 !important;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color: var(--page-text);
        overflow-x: hidden;
        overflow-y: hidden;
        height: 100vh;
      }

      /* ===== Background ===== */
      body.bluevox-login .bg {
        min-height: 100vh;
        height: 100vh;
        display: grid;
        place-items: center;
        padding: 20px 0;
        position: relative;
        isolation: isolate;
        overflow: hidden;

        background:
          radial-gradient(1100px 760px at 88% 55%, rgba(40, 165, 255, 0.34), rgba(0, 0, 0, 0) 62%),
          radial-gradient(900px 650px at 92% 60%, rgba(20, 120, 255, 0.20), rgba(0, 0, 0, 0) 62%),
          linear-gradient(90deg, #02040b, #031531 55%, #062f67);
      }

      /* Optional "extra stars" layer */
      body.bluevox-login .bg::before {
        content: "";
        position: absolute;
        inset: 0;
        background-image:
          radial-gradient(1px 1px at 12% 18%, rgba(255, 255, 255, 0.75) 50%, transparent 52%),
          radial-gradient(1px 1px at 18% 62%, rgba(255, 255, 255, 0.6) 50%, transparent 52%),
          radial-gradient(1px 1px at 28% 78%, rgba(255, 255, 255, 0.55) 50%, transparent 52%),
          radial-gradient(1px 1px at 33% 35%, rgba(255, 255, 255, 0.55) 50%, transparent 52%),
          radial-gradient(1px 1px at 46% 22%, rgba(255, 255, 255, 0.5) 50%, transparent 52%),
          radial-gradient(1px 1px at 52% 66%, rgba(255, 255, 255, 0.6) 50%, transparent 52%),
          radial-gradient(1px 1px at 63% 44%, rgba(255, 255, 255, 0.6) 50%, transparent 52%),
          radial-gradient(1px 1px at 71% 77%, rgba(255, 255, 255, 0.55) 50%, transparent 52%),
          radial-gradient(1px 1px at 79% 16%, rgba(255, 255, 255, 0.6) 50%, transparent 52%),
          radial-gradient(1px 1px at 86% 58%, rgba(255, 255, 255, 0.7) 50%, transparent 52%),
          radial-gradient(1px 1px at 92% 32%, rgba(255, 255, 255, 0.55) 50%, transparent 52%),
          radial-gradient(1px 1px at 6% 82%, rgba(255, 255, 255, 0.5) 50%, transparent 52%);
        opacity: 0.55;
        pointer-events: none;
        z-index: -1;
      }

      /* ===== Layout wrapper ===== */
      body.bluevox-login .wrap {
        width: min(1040px, 100%);
        text-align: center;
      }

      /* ===== Brand block - zoomed out further ===== */
      body.bluevox-login .brand {
        display: grid;
        place-items: center;
        gap: 8px; /* Further reduced for zoom out */
        margin-bottom: 10px; /* Reduced for zoom out */
      }

      body.bluevox-login .brandRow {
        display: inline-flex;
        align-items: center;
        gap: 12px; /* Reduced to bring DePaul and BlueVox closer together */
      }

      /* Exact DePaul logo image - zoomed out */
      body.bluevox-login .depaulLogo {
        height: 73px; /* 86px * 0.85 = 73px (zoomed out) */
        width: auto;
        image-rendering: auto;
        filter: drop-shadow(0 0 14px rgba(0, 0, 0, 0.35));
      }


      body.bluevox-login .divider {
        width: 1px;
        height: 54px; /* 63px * 0.85 = 53.55px, rounded to 54px (zoomed out) */
        background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.65), transparent);
        opacity: 0.85;
      }

      /* BlueVox look - zoomed out */
      body.bluevox-login .bluevox {
        font-family: "Marck Script", cursive;
        font-size: 70px; /* 82px * 0.85 = 69.7px, rounded to 70px (zoomed out) */
        line-height: 0.92;
        letter-spacing: 0px;
        color: rgba(205, 232, 255, 0.96);
        text-shadow:
          0 0 10px rgba(90, 170, 255, 0.22),
          0 0 22px rgba(30, 120, 255, 0.12);
        transform: translateY(2px);
        user-select: none;
      }

      body.bluevox-login .brandLine {
        width: 376px; /* 442px * 0.85 = 375.7px, rounded to 376px (zoomed out) */
        max-width: 92%;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.55), transparent);
        opacity: 0.6;
        margin-top: 2px;
      }

      body.bluevox-login .shield {
        width: 94px; /* 110px * 0.85 = 93.5px, rounded to 94px (zoomed out) */
        height: auto;
        opacity: 0.95;
        margin-top: 2px; /* Moved up closer to words above */
        filter: drop-shadow(0 0 10px rgba(90, 170, 255, 0.16));
      }

      /* ===== Tagline - zoomed out ===== */
      body.bluevox-login .tagline {
        margin: 15px 0 10px; /* Reduced for zoom out */
        font-size: 22px; /* 26px * 0.85 = 22.1px, rounded to 22px (zoomed out) */
        font-weight: 400;
        color: rgba(255, 255, 255, 0.82);
        text-shadow: 0 0 14px rgba(0, 0, 0, 0.22);
      }

      /* ===== Form - zoomed out ===== */
      body.bluevox-login .form {
        width: 563px; /* 663px * 0.85 = 563.55px, rounded to 563px (zoomed out) */
        max-width: 100%;
        margin: 0 auto;
        text-align: left;
        display: grid;
        gap: 13px; /* 15px * 0.85 = 12.75px, rounded to 13px (zoomed out) */
      }

      body.bluevox-login label {
        display: block;
        font-size: 16px; /* 19px * 0.85 = 16.15px, rounded to 16px (zoomed out) */
        font-weight: 400;
        color: rgba(255, 255, 255, 0.78);
        margin-bottom: 6px; /* 7px * 0.85 = 5.95px, rounded to 6px (zoomed out) */
      }

      body.bluevox-login .field {
        width: 100%;
        height: 33px; /* 39px * 0.85 = 33.15px, rounded to 33px (zoomed out) */
        border-radius: 2px;
        border: 2px solid var(--field-border);
        background: var(--field-bg);
        color: rgba(255, 255, 255, 0.9);
        padding: 8px 10px; /* Reduced for zoom out */
        font-size: 13px; /* 15px * 0.85 = 12.75px, rounded to 13px (zoomed out) */
        outline: none;
        box-shadow:
          0 0 0 1px rgba(0, 0, 0, 0.25) inset,
          0 0 18px rgba(30, 110, 255, 0.10);
        transition: border-color 160ms ease, box-shadow 160ms ease;
      }

      body.bluevox-login .field:focus {
        border-color: var(--field-border-focus);
        box-shadow:
          0 0 0 1px rgba(0, 0, 0, 0.2) inset,
          0 0 22px rgba(70, 170, 255, 0.18);
      }

      body.bluevox-login .btnRow {
        margin-top: 8px;
      }

      body.bluevox-login .btn {
        width: 187px; /* 220px * 0.85 = 187px (zoomed out) */
        height: 48px; /* 56px * 0.85 = 47.6px, rounded to 48px (zoomed out) */
        border-radius: 8px;
        border: 1px solid var(--btn-border);
        background: linear-gradient(180deg, var(--btn-top), var(--btn-bot));
        color: rgba(255, 255, 255, 0.92);
        font-size: 22px; /* 26px * 0.85 = 22.1px, rounded to 22px (zoomed out) */
        font-weight: 500;
        cursor: pointer;
        box-shadow:
          0 12px 28px rgba(0, 0, 0, 0.38),
          0 0 0 1px rgba(0, 0, 0, 0.18) inset,
          0 0 18px rgba(70, 160, 255, 0.16);
        transition: transform 150ms ease, filter 150ms ease, box-shadow 150ms ease;
      }

      body.bluevox-login .btn:hover {
        transform: translateY(-1px);
        filter: brightness(1.05);
        box-shadow:
          0 16px 34px rgba(0, 0, 0, 0.42),
          0 0 0 1px rgba(0, 0, 0, 0.18) inset,
          0 0 22px rgba(70, 160, 255, 0.2);
      }

      body.bluevox-login .btn:active {
        transform: translateY(0px);
        filter: brightness(0.98);
      }

      /* ===== Footer links - zoomed out ===== */
      body.bluevox-login .footer {
        margin-top: 30px; /* Significantly reduced to fit on screen */
        text-align: center;
        color: rgba(255, 255, 255, 0.62);
      }

      body.bluevox-login .footer .instructor {
        display: inline-block;
        margin-bottom: 8px; /* Reduced for zoom out */
        font-size: 17px; /* 20px * 0.85 = 17px (zoomed out) */
        color: rgba(140, 195, 255, 0.75);
        text-decoration: none;
      }

      body.bluevox-login .footer .instructor:hover {
        text-decoration: underline;
        text-underline-offset: 3px;
      }

      body.bluevox-login .footer a {
        color: rgba(170, 220, 255, 0.78);
        text-decoration: underline;
        text-underline-offset: 3px;
      }

      body.bluevox-login .footer a:hover {
        color: rgba(220, 245, 255, 0.95);
      }

      /* Error and Success Messages */
      body.bluevox-login .error-message-bluevox {
        background: rgba(220, 38, 38, 0.2);
        border: 1px solid rgba(220, 38, 38, 0.5);
        color: #fca5a5;
        padding: 10px 14px; /* Reduced for zoom out */
        border-radius: 8px;
        margin-bottom: 15px; /* Reduced for zoom out */
        text-align: center;
        font-size: 12px; /* Reduced for zoom out */
      }

      body.bluevox-login .success-message-bluevox {
        background: rgba(34, 197, 94, 0.2);
        border: 1px solid rgba(34, 197, 94, 0.5);
        color: #86efac;
        padding: 10px 14px; /* Reduced for zoom out */
        border-radius: 8px;
        margin-bottom: 15px; /* Reduced for zoom out */
        text-align: center;
        font-size: 12px; /* Reduced for zoom out */
      }

      body.bluevox-login .hello-message {
        margin-top: 8px;
        margin-bottom: 4px;
        font-size: 18px;
        font-weight: 500;
        color: rgba(170, 220, 255, 0.95);
        text-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      }

      /* ===== Responsive ===== */
      @media (max-width: 820px) {
        body.bluevox-login .depaulLogo {
          height: 61px; /* 73px * 0.85 = 62px, rounded to 61px (zoomed out) */
        }
        body.bluevox-login .divider {
          height: 46px; /* 54px * 0.85 = 45.9px, rounded to 46px (zoomed out) */
        }
        body.bluevox-login .bluevox {
          font-size: 60px; /* 70px * 0.85 = 59.5px, rounded to 60px (zoomed out) */
        }
        body.bluevox-login .shield {
          width: 80px; /* 94px * 0.85 = 79.9px, rounded to 80px (zoomed out) */
        }
        body.bluevox-login .tagline {
          font-size: 19px; /* 22px * 0.85 = 18.7px, rounded to 19px (zoomed out) */
        }
        body.bluevox-login .form {
          width: 100%;
        }
      }

      @media (max-width: 520px) {
        body.bluevox-login .brandRow {
          gap: 7px; /* Reduced for zoom out */
        }
        body.bluevox-login .depaulLogo {
          height: 49px; /* 58px * 0.85 = 49.3px, rounded to 49px (zoomed out) */
        }
        body.bluevox-login .divider {
          height: 37px; /* 44px * 0.85 = 37.4px, rounded to 37px (zoomed out) */
          opacity: 0.65;
        }
        body.bluevox-login .bluevox {
          font-size: 49px; /* 58px * 0.85 = 49.3px, rounded to 49px (zoomed out) */
        }
        body.bluevox-login .shield {
          width: 64px; /* 75px * 0.85 = 63.75px, rounded to 64px (zoomed out) */
        }
        body.bluevox-login .btn {
          width: 100%;
        }
      }
    </style>
</head>

<body class="bluevox-login">
    <main class="bg">
        <section class="wrap" aria-label="Login">
            <!-- Brand header -->
            <header class="brand">
                <div class="brandRow" aria-label="Brand">
                    <!-- Exact DePaul logo image -->
                    <img class="depaulLogo" src="/static/assets/depaul-logo.png" alt="DePaul University" />

                    <div class="divider" aria-hidden="true"></div>

                    <div class="bluevox">BlueVox</div>
                </div>

                <div class="brandLine" aria-hidden="true"></div>

                <!-- Exact DePaul shield image -->
                <img class="shield" src="/static/assets/depaul-shield.png" alt="DePaul shield" />
            </header>

            <div class="tagline">DePaul University's AI exam platform.</div>
            <div id="hello-message" class="hello-message" aria-live="polite" style="display: none;"></div>

            {% if error %}
            <div class="error-message-bluevox">
                {% if error == "invalid_login" %}
                    Invalid login
                {% else %}
                    {{ error }}
                {% endif %}
            </div>
            {% endif %}
            
            {% if success %}
            <div class="success-message-bluevox">
                {% if success == "account_created" %}
                    Account created successfully! Please log in with your email and password.
                {% else %}
                    {{ success }}
                {% endif %}
            </div>
            {% endif %}

            <!-- Login form -->
            <form class="form" method="post" action="/api/login" autocomplete="on">
                <div>
                    <label for="email">Email:</label>
                    <input class="field" id="email" name="email" type="email" autocomplete="username" required autofocus />
                </div>

                <div>
                    <label for="password">Password:</label>
                    <input
                        class="field"
                        id="password"
                        name="password"
                        type="password"
                        autocomplete="current-password"
                        required
                    />
                </div>

                <div class="btnRow">
                    <button class="btn" type="submit">Log In</button>
                </div>
            </form>

            <footer class="footer">
                <div>Don't have an account? <a href="/signup">Create one here</a></div>
            </footer>
        </section>
    </main>
    <script>
      (function () {
        var emailInput = document.getElementById('email');
        var helloEl = document.getElementById('hello-message');
        var debounceTimer = null;
        var lastCheckedEmail = '';

        function showHello(data) {
          if (!data.found) {
            helloEl.style.display = 'none';
            helloEl.textContent = '';
            return;
          }
          var name = (data.first_name || '').trim() || 'there';
          var roleLabel = data.role === 'teacher' ? 'Instructor' : 'Student';
          helloEl.textContent = 'Hello, ' + name + '! Sign in as ' + roleLabel + '.';
          helloEl.style.display = 'block';
        }

        function checkEmail() {
          var email = (emailInput.value || '').trim().toLowerCase();
          if (!email || email.indexOf('@') === -1) {
            helloEl.style.display = 'none';
            helloEl.textContent = '';
            lastCheckedEmail = '';
            return;
          }
          if (email === lastCheckedEmail) return;
          lastCheckedEmail = email;

          fetch('/api/lookup-email?email=' + encodeURIComponent(email))
            .then(function (r) { return r.json(); })
            .then(showHello)
            .catch(function () {
              helloEl.style.display = 'none';
              helloEl.textContent = '';
            });
        }

        emailInput.addEventListener('input', function () {
          clearTimeout(debounceTimer);
          debounceTimer = setTimeout(checkEmail, 400);
        });
        emailInput.addEventListener('blur', function () {
          clearTimeout(debounceTimer);
          checkEmail();
        });
      })();
    </script>
</body>
</html>